<%- include('../partials/header', {title: 'Forgot Password'}) %>

<div class="flex items-center justify-center min-h-screen p-4 bg-neutral-50">

  <div class="w-full max-w-sm p-8 bg-white border-4 border-black shadow-[8px_8px_0px_#000]">

    <h1 class="text-3xl font-bold uppercase text-center mb-2">
      Reset Password
    </h1>
    <p class="text-center text-neutral-600 mb-6">// Forgot Password</p>

    <form action="/password/forgot" method="POST">

      <input type="hidden" name="_csrf" value="<%= csrfToken %>">

      <div class="mb-6">
        <label for="email" class="block text-black font-bold mb-2 uppercase">
          Email Address
        </label>
        <input
          type="email"
          id="email"
          name="email"
          required
          maxlength="255"
          placeholder="you@example.com"
          autofocus
          class="w-full px-3 py-2 border-2 border-black focus:bg-yellow-300 outline-none transition-colors"
          value="<%= locals.oldEmail || '' %>"
        />
        <p class="text-xs text-neutral-600 mt-1">// Enter your registered email</p>
      </div>

      <% if (error) { %>
      <div class="bg-red-100 text-red-800 p-3 border-2 border-black mb-4 font-bold text-sm uppercase">
        <%= error %>
      </div>
      <% } %>

      <% if (success) { %>
      <div class="bg-green-100 text-green-800 p-3 border-2 border-black mb-4 font-bold text-sm">
        <%= success %>
        <% if (locals.debugToken) { %>
        <div class="mt-2 text-xs bg-green-200 p-2 border border-green-800 font-mono break-all">
          <strong>DEBUG TOKEN:</strong> <%= debugToken %>
          <br><small>Use this token in the reset form (email not configured)</small>
        </div>
        <% } %>
      </div>
      <% } %>

      <button
        type="submit"
        class="w-full bg-yellow-300 text-black font-bold py-3 px-4 border-2 border-black hover:bg-black hover:text-yellow-300 uppercase transition-colors"
      >
        Send Reset Link
      </button>

      <div class="mt-4 text-center">
        <a href="/login" class="text-sm font-bold uppercase underline hover:bg-yellow-300 px-1">
          Back to Login
        </a>
      </div>
    </form>
  </div>
</div>

<%- include('../partials/footer') %>
