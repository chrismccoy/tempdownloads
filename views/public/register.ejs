<%- include('../partials/header', {title: 'Register'}) %>

<div class="flex items-center justify-center min-h-screen p-4 bg-neutral-50">
  
  <div class="w-full max-w-sm p-8 bg-white border-4 border-black shadow-[8px_8px_0px_#000]">
    
    <h1 class="text-3xl font-bold uppercase text-center mb-2">Register</h1>
    <p class="text-center text-neutral-600 mb-6">// Request Access</p>

    <form action="/register" method="POST">
      
      <input type="hidden" name="_csrf" value="<%= csrfToken %>">
      
      <div class="mb-4">
        <label class="block text-black font-bold mb-2 uppercase">Username</label>
        <input
          type="text"
          name="username"
          required
          minlength="3"
          maxlength="50"
          pattern="[a-zA-Z0-9_-]+"
          title="Username may only contain letters, numbers, dashes, and underscores"
          class="w-full px-3 py-2 border-2 border-black focus:bg-yellow-300 outline-none transition-colors"
          value="<%= locals.oldValues?.username || '' %>"
        />
      </div>

      <div class="mb-4">
        <label class="block text-black font-bold mb-2 uppercase">Email</label>
        <input
          type="email"
          name="email"
          required
          maxlength="255"
          placeholder="you@example.com"
          class="w-full px-3 py-2 border-2 border-black focus:bg-yellow-300 outline-none transition-colors"
          value="<%= locals.oldValues?.email || '' %>"
        />
        <p class="text-xs text-neutral-600 mt-1">// Used for password reset</p>
      </div>

      <div class="mb-4">
        <label class="block text-black font-bold mb-2 uppercase">Password</label>
        <input
          type="password"
          name="password"
          required
          minlength="8"
          class="w-full px-3 py-2 border-2 border-black focus:bg-yellow-300 outline-none transition-colors"
        />
        <p class="text-xs text-neutral-600 mt-1">// Min 8 characters</p>
      </div>

      <div class="mb-6">
        <label class="block text-black font-bold mb-2 uppercase">Confirm Password</label>
        <input
          type="password"
          name="passwordConfirm"
          required
          minlength="8"
          class="w-full px-3 py-2 border-2 border-black focus:bg-yellow-300 outline-none transition-colors"
        />
      </div>

      <% if (error) { %>
        <div class="bg-red-100 text-red-800 p-3 border-2 border-black mb-4 font-bold text-sm uppercase">
          <%= error %>
        </div>
      <% } %>
      
      <% if (success) { %>
        <div class="bg-green-100 text-green-800 p-3 border-2 border-black mb-4 font-bold text-sm uppercase">
          <%= success %>
        </div>
      <% } %>

      <button 
        type="submit" 
        class="w-full bg-black text-white font-bold py-3 px-4 border-2 border-transparent hover:bg-yellow-300 hover:text-black hover:border-black uppercase transition-colors"
      >
        Request Access
      </button>
      
      <div class="mt-4 text-center">
        <a href="/login" class="text-sm font-bold uppercase underline hover:bg-yellow-300 px-1">
          Back to Login
        </a>
      </div>
    </form>
  </div>
</div>

<%- include('../partials/footer') %>
